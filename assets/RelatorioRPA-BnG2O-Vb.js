import{f as d,r as c,j as e}from"./index-BDI_6ICx.js";import{P as _,S as C,F as l,s as b,i as u}from"./ui-tNtznLMN.js";const P={Propofol:"10mg/ml",Midazolam:"5mg/ml",Fentanil:"50mcg/ml",Morfina:"10mg/ml",Atracúrio:"10mg/ml",Rocurônio:"10mg/ml",Sevoflurano:"100%",Isoflurano:"100%",Lidocaína:"2%",Bupivacaína:"0,5%",Epinefrina:"1mg/ml",Atropina:"1mg/ml",Neostigmina:"0,5mg/ml",Sugamadex:"100mg/ml",Cetamina:"50mg/ml"},$=Object.keys(P),M={atividade:{label:"Atividade (0–2)",options:[{t:"0 - Não move membros",s:0},{t:"1 - Move 2 membros",s:1},{t:"2 - Move 4 membros",s:2}]},respiracao:{label:"Respiração (0–2)",options:[{t:"0 - Apnéia",s:0},{t:"1 - Dispneia/respiração limitada",s:1},{t:"2 - Respiração normal",s:2}]},circulacao:{label:"Circulação (0–2)",options:[{t:"0 - PA ±50% do pré-operatório",s:0},{t:"1 - PA ±20–50% do pré-operatório",s:1},{t:"2 - PA ±20% do pré-operatório",s:2}]},consciencia:{label:"Consciência (0–2)",options:[{t:"0 - Não responde",s:0},{t:"1 - Desperta com estímulo",s:1},{t:"2 - Totalmente desperto",s:2}]},saturacao:{label:"Saturação O₂ (0–2)",options:[{t:"0 - SpO₂ < 90% com O₂",s:0},{t:"1 - SpO₂ ≥ 90% com O₂",s:1},{t:"2 - SpO₂ ≥ 92% em ar ambiente",s:2}]}};function U(o){return o<=3?{label:"Risco muito alto • Cuidados intensivos",chip:"bg-rose-100 text-rose-800"}:o<=6?{label:"Risco alto • Observação",chip:"bg-orange-100 text-orange-800"}:o<=8?{label:"Risco moderado",chip:"bg-amber-100 text-amber-800"}:{label:"Baixo risco • Apto(a) à alta da RPA",chip:"bg-emerald-100 text-emerald-800"}}const x=[{nome:"Cateter nasal"},{nome:"Látex oxigênio"},{nome:"Equipo"},{nome:"Polifix"},{nome:"Torneirinha (multivias)",variantes:["2 vias","3 vias"]},{nome:"Cateter venoso (Abocath)",variantes:["24G","22G","20G"]},{nome:"Esparadrapo"},{nome:"Micropore"},{nome:"Extensor de equipo"},{nome:"Seringa",variantes:["10 mL","20 mL","60 mL"]},{nome:"Guedel",variantes:["#2","#3","#4"]},{nome:"Nasofaríngea"},{nome:"Tubo endotraqueal",variantes:["7.0","7.5","8.0"]},{nome:"Máscara laríngea",variantes:["1","2","3","4","5"]},{nome:"Outro"}];function H(){const o=d.getAll(),[r,p]=c.useState({nome:"",outro:"",conc:"",qtd:""}),[h,j]=c.useState(o.rpa.drogas||[]);function g(a){p(a==="Outro"?t=>({...t,nome:a,outro:"",conc:""}):t=>({...t,nome:a,outro:"",conc:P[a]??""}))}function m(a){const{name:t,value:i}=a.target;p(n=>({...n,[t]:i}))}function f(){const a=r.nome==="Outro"?(r.outro||"").trim():r.nome;if(!a)return;const t={nome:a,conc:r.conc,qtd:r.qtd},i=[...h,t];j(i),d.addRpaDroga(t),p({nome:"",outro:"",conc:"",qtd:""})}function N(a){j(t=>t.filter((i,n)=>n!==a)),d.removeRpaDroga(a)}const[s,v]=c.useState({item:"",variante:"",outro:"",qtd:""}),[R,D]=c.useState(o.rpa.materiais||[]),w=c.useMemo(()=>x.find(t=>t.nome===s.item)?.variantes||[],[s.item]);function F(){const t=x.find(S=>S.nome===s.item)?.nome==="Outro"?(s.outro||"").trim():s.item;if(!t||!s.qtd)return;const i={item:t,variante:w.length?s.variante:"",qtd:s.qtd},n=[...R,i];D(n),d.setRpa({materiais:n}),v({item:"",variante:"",outro:"",qtd:""})}function y(a){const t=R.filter((i,n)=>n!==a);D(t),d.setRpa({materiais:t})}const[L,k]=c.useState(o.rpa.resumo||""),[T,G]=c.useState(o.rpa.observacoes||""),[I,Q]=c.useState(o.rpa.destino||""),[A,B]=c.useState({atividade:o.rpa.aldrete?.atividade||0,respiracao:o.rpa.aldrete?.respiracao||0,circulacao:o.rpa.aldrete?.circulacao||0,consciencia:o.rpa.aldrete?.consciencia||0,saturacao:o.rpa.aldrete?.saturacao||0}),O=c.useMemo(()=>Object.entries(A).reduce((a,[t,i])=>a+(M[t].options[i]?.s??0),0),[A]),q=U(O);return e.jsxs(_,{children:[e.jsxs(C,{title:"Fichário de Gastos — Medicações",tone:"emerald",children:[e.jsxs("p",{className:"text-xs sm:text-sm text-slate-600 mb-3",children:["Selecione uma medicação (concentração padrão) ou escolha ",e.jsx("b",{children:"Outro"}),", informe a ",e.jsx("b",{children:"Quantidade"})," e clique em ",e.jsx("i",{children:"Adicionar"}),"."]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-[2fr,2fr,1.5fr,1.5fr,auto] items-end",children:[e.jsx(l,{label:"Droga (lista)",children:e.jsxs("select",{className:b,name:"nome",value:r.nome,onChange:a=>g(a.target.value),children:[e.jsx("option",{value:"",children:"Selecione…"}),$.map(a=>e.jsx("option",{children:a},a)),e.jsx("option",{children:"Outro"})]})}),r.nome==="Outro"?e.jsx(l,{label:"Nome do medicamento",children:e.jsx("input",{className:u,name:"outro",value:r.outro,onChange:m,placeholder:"Digite o nome"})}):e.jsx("div",{className:"hidden sm:block"}),e.jsx(l,{label:"Concentração",children:e.jsx("input",{className:u,name:"conc",value:r.conc,onChange:m,placeholder:"Ex.: 10mg/ml"})}),e.jsx(l,{label:"Quantidade",children:e.jsx("input",{className:u,name:"qtd",value:r.qtd,onChange:m,placeholder:"Ex.: 2 mL, 50 mg"})}),e.jsx("button",{onClick:f,className:"h-[42px] rounded-xl bg-emerald-600 px-4 font-semibold text-white shadow-sm hover:bg-emerald-700",children:"Adicionar"})]}),e.jsx(E,{head:["Droga","Concentração","Quantidade",""],rows:h.map(a=>[a.nome,a.conc||"—",a.qtd||"—"]),onDelete:N})]}),e.jsxs(C,{title:"Fichário de Gastos — Materiais",tone:"sky",children:[e.jsxs("div",{className:"grid gap-4 sm:grid-cols-[2fr,2fr,1fr,auto] items-end",children:[e.jsx(l,{label:"Material",children:e.jsxs("select",{className:b,value:s.item,onChange:a=>v(t=>({...t,item:a.target.value,variante:"",outro:""})),children:[e.jsx("option",{value:"",children:"Selecione…"}),x.map(a=>e.jsx("option",{children:a.nome},a.nome))]})}),s.item==="Outro"?e.jsx(l,{label:"Outro (descrição)",children:e.jsx("input",{className:u,value:s.outro,onChange:a=>v(t=>({...t,outro:a.target.value})),placeholder:"Descreva o material"})}):e.jsx(l,{label:"Variante",children:e.jsx("select",{className:b,disabled:(x.find(a=>a.nome===s.item)?.variantes||[]).length===0,value:s.variante,onChange:a=>v(t=>({...t,variante:a.target.value})),children:(x.find(a=>a.nome===s.item)?.variantes||[]).length===0?e.jsx("option",{value:"",children:"—"}):e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"",children:"Selecione…"}),(x.find(a=>a.nome===s.item)?.variantes||[]).map(a=>e.jsx("option",{children:a},a))]})})}),e.jsx(l,{label:"Qtd.",children:e.jsx("input",{className:u,inputMode:"numeric",placeholder:"Ex.: 1",value:s.qtd,onChange:a=>v(t=>({...t,qtd:a.target.value.replace(/[^\d]/g,"")}))})}),e.jsx("button",{onClick:F,className:"h-[42px] rounded-xl bg-sky-600 px-4 font-semibold text-white shadow-sm hover:bg-sky-700",children:"Adicionar"})]}),e.jsx(E,{head:["Item","Variante","Qtd.",""],rows:R.map(a=>[a.item,a.variante||"—",a.qtd||"—"]),onDelete:y,headColor:"sky"})]}),e.jsxs(C,{title:"Saída da RPA (Recuperação Pós-Anestésica)",tone:"lavender",children:[e.jsx(l,{label:"Resumo da Ficha",children:e.jsx("textarea",{rows:4,className:`${u} h-auto`,placeholder:"Resumo geral do procedimento...",value:L,onChange:a=>{k(a.target.value),d.setRpa({resumo:a.target.value})}})}),e.jsxs("div",{className:"mt-6 grid gap-4 sm:grid-cols-2",children:[Object.entries(M).map(([a,t])=>e.jsx(l,{label:t.label,children:e.jsx("select",{className:b,value:A[a],onChange:i=>{const n=Number(i.target.value);B(S=>({...S,[a]:n})),d.setAldreteField(a,n)},children:t.options.map((i,n)=>e.jsx("option",{value:n,children:i.t},n))})},a)),e.jsx("div",{className:"sm:col-span-2",children:e.jsxs("div",{className:"rounded-xl border border-amber-200 bg-amber-50 p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm font-semibold text-amber-900",children:["Pontuação Total: ",O,"/10"]}),e.jsx("div",{className:`rounded-full px-3 py-1 text-xs font-semibold ${q.chip}`,children:q.label})]})})]}),e.jsx(l,{label:"Intercorrências ou Alterações na RPA",children:e.jsx("textarea",{rows:4,className:`${u} h-auto`,placeholder:"Descreva intercorrências...",value:T,onChange:a=>{G(a.target.value),d.setRpa({observacoes:a.target.value})}})}),e.jsx(l,{label:"Destino do paciente",children:e.jsxs("select",{className:b,value:I,onChange:a=>{Q(a.target.value),d.setRpa({destino:a.target.value})},children:[e.jsx("option",{value:"",children:"Selecione…"}),e.jsx("option",{children:"Alta pra casa"}),e.jsx("option",{children:"Enfermaria"}),e.jsx("option",{children:"Apartamento"}),e.jsx("option",{children:"REMOÇÃO PARA UTI"})]})})]})]})}function E({head:o,rows:r,onDelete:p,headColor:h="emerald"}){const j=h==="sky"?"bg-sky-600":h==="indigo"?"bg-indigo-600":"bg-emerald-600";return e.jsx("div",{className:"mt-6 overflow-hidden rounded-xl border border-slate-200",children:e.jsx("div",{className:"overflow-x-auto bg-white",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{children:e.jsx("tr",{className:`${j} text-white`,children:o.map((g,m)=>e.jsx("th",{className:"px-3 py-2 text-left",children:g},m))})}),e.jsxs("tbody",{children:[r.length===0&&e.jsx("tr",{children:e.jsx("td",{className:"px-3 py-4 text-slate-500",colSpan:o.length,children:"Nenhum item adicionado."})}),r.map((g,m)=>e.jsxs("tr",{className:"odd:bg-slate-50",children:[g.map((f,N)=>e.jsx("td",{className:"px-3 py-2",children:f},N)),e.jsx("td",{className:"px-3 py-2",children:e.jsx("button",{onClick:()=>p(m),className:"rounded-lg bg-rose-600 px-3 py-1 text-xs font-semibold text-white hover:bg-rose-700",children:"Excluir"})})]},m))]})]})})})}export{H as default};
